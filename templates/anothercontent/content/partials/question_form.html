<div class="form-container question-form mb-3 border p-3 rounded" data-form-idx="{{ form_idx }}">
  {{ form.id }}
  {{ form.DELETE.as_hidden }}

  <div class="d-flex justify-content-between align-items-center mb-2">
    <h5>질문 #{{ form_idx|add:"1" }}</h5>
    <button type="button" class="btn btn-sm btn-danger delete-form-btn">삭제</button>
  </div>

  <div class="mb-3">
    <label for="{{ form.question_text.id_for_label }}">질문 내용</label>
    <input type="text" name="{{ form.question_text.html_name }}"
           id="{{ form.question_text.id_for_label }}"
           value="{{ form.question_text.value|default:"" }}"
           class="form-control">
    {{ form.question_text.errors }}
  </div>

  <div class="mb-3">
    <label for="{{ form.question_type.id_for_label }}">질문 유형</label>
    <select name="{{ form.question_type.html_name }}"
            id="{{ form.question_type.id_for_label }}"
            class="form-control"
            hx-get="{% url 'toggle_question_fields' %}"
            hx-target="#question-fields-{{ form_idx }}"
            hx-swap="innerHTML"
            hx-vals='{"form_idx": "{{ form_idx }}"}'>
      {% for value, text in form.fields.question_type.choices %}
        <option value="{{ value }}" {% if form.question_type.value == value %}selected{% endif %}>{{ text }}</option>
      {% endfor %}
    </select>
    {{ form.question_type.errors }}
  </div>

  <div class="mb-3 form-check">
    <input type="checkbox" name="{{ form.required.html_name }}"
           id="{{ form.required.id_for_label }}"
           class="form-check-input"
           {% if form.required.value %}checked{% endif %}>
    <label for="{{ form.required.id_for_label }}" class="form-check-label">필수 응답</label>
    {{ form.required.errors }}
  </div>

  <div id="question-fields-{{ form_idx }}">
    {% include "anothercontent/content/partials/question_fields.html" with question_type=form.question_type.value|default:"" form_idx=form_idx %}
  </div>

  <div class="mb-2">
    <label for="{{ form.order.id_for_label }}">순서</label>
    <input type="number" name="{{ form.order.html_name }}"
           id="{{ form.order.id_for_label }}"
           value="{{ form.order.value|default:form_idx }}"
           class="form-control">
  </div>
</div>