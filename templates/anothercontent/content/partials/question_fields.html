{% if question_type == 'mc' %}
  <div class="card mb-3">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h6>선택지</h6>
      <button type="button" class="btn btn-sm btn-outline-primary" 
              hx-get="{% url 'add_choice_form' %}" 
              hx-target="#choices-container-{{ form_idx }}" 
              hx-swap="beforeend"
              hx-vals='{"form_idx": "NEW", "question_idx": "{{ form_idx }}"}'>
        선택지 추가
      </button>
    </div>
    <div class="card-body">
      <div id="choices-container-{{ form_idx }}" class="choices-container" data-question-id="{{ form_idx }}">
        {% if form.instance.pk %}
          {% for choice_form in form.instance.choices.all %}
            <div class="choice-form mb-2 border-bottom pb-2">
              <div class="d-flex">
                <input type="text" name="questions-{{ form_idx }}-choices-{{ forloop.counter0 }}-choice_text" 
                      value="{{ choice_form.choice_text }}" class="form-control me-2">
                <div class="form-check">
                  <input type="checkbox" name="questions-{{ form_idx }}-choices-{{ forloop.counter0 }}-is_correct" 
                        {% if choice_form.is_correct %}checked{% endif %} class="form-check-input">
                  <label class="form-check-label">정답</label>
                </div>
                <button type="button" class="btn btn-sm btn-outline-danger ms-2 delete-choice-btn">삭제</button>
              </div>
            </div>
          {% endfor %}
        {% else %}
          {% for i in "123" %}
            <div class="choice-form mb-2 border-bottom pb-2">
              <div class="d-flex">
                <input type="text" name="questions-{{ form_idx }}-choices-{{ forloop.counter0 }}-choice_text" 
                      class="form-control me-2" placeholder="선택지 {{ forloop.counter }}">
                <div class="form-check">
                  <input type="checkbox" name="questions-{{ form_idx }}-choices-{{ forloop.counter0 }}-is_correct" 
                        class="form-check-input">
                  <label class="form-check-label">정답</label>
                </div>
                <button type="button" class="btn btn-sm btn-outline-danger ms-2 delete-choice-btn">삭제</button>
              </div>
            </div>
          {% endfor %}
        {% endif %}
      </div>
    </div>
  </div>
{% elif question_type == 'rating' %}
  <div class="mb-3">
    <label>별점 설정</label>
    <div class="d-flex">
      <input type="number" name="questions-{{ form_idx }}-min_rating" value="1" min="1" max="5" class="form-control me-2">
      <span class="align-self-center">~</span>
      <input type="number" name="questions-{{ form_idx }}-max_rating" value="5" min="1" max="10" class="form-control ms-2">
    </div>
  </div>
{% endif %}